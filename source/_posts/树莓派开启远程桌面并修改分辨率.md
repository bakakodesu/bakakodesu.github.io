---
title: 树莓派开启远程桌面并修改分辨率
date: 2023-08-09 11:15:35
categories:
- [环境配置, Raspberry Pi]
tags:
- Raspberry Pi
math: false
---

### 1.启动树莓派桌面系统自带的 VNC 服务

首先 ssh 登录树莓派，终端输入 `sudo raspi-config` 启动自带的配置程序。

找到「Interfacing Options」选项，进入二级菜单找到「VNC」选项开启。

### 2.下载 VNC Viewer

[下载地址](https://www.realvnc.com/en/connect/download/viewer/)

### 3.登录远程桌面

运行 VNC Viewer 之后输入树莓派的 IP 地址，通过 `ifconfig` 命令可以查看。选择连接之后输入树莓派的登录用户名和密码（烧录系统时初始化）。确认之后即可进入树莓派的远程桌面。

### 4.修改分辨率

终端输入 `sudo raspi-config` 启动配置程序，操作顺序为「Advanced Options > Resolution」。

需要注意的是：

1. 在树莓派没有连接显示器的情况下，上述操作可以调整远程桌面分辨率，但最大为「1920x1080」；
2. 在树莓派连接显示器的情况下，远程桌面分辨率与显示器分辨率相同，无法通过配置程序进行修改。可以在「Preferences」中修改显示器分辨率，从而修改远程桌面分辨率。这种情况下，可以认为远程桌面为显示器镜像；
3. 可以采用在终端输入例如 `vncserver -geometry 2560x1440 :1`（如果不行就 `vncserver-virtual -geometry 2560x1440 :1`）的方式开启一个新的（临时）桌面，新桌面的分辨率为 2560x1440，端口号为 1。
   1. VNC Viewer 连接新桌面输入 IP 时，需要加上端口号，例如 `192.168.1.216:1`。新桌面开启成功后，终端会返回这个值；
   2. 可以开启多个桌面，只要端口不重复、占用，且每个桌面互相独立；
   3. 如果指令不带端口号，例如 `vncserver -geometry 2560x1440` 则会默认从端口 1 开启。若端口 1 已被桌面占用，则会开启端口 2，以此类推；
   4. 若新桌面鼠标变成一个「X」，可在终端输入 `lxappearance` 打开鼠标设置，即可恢复正常；
   5. 通过这种方式开启的桌面，会在树莓派关机后销毁，所以是「临时」的。

### 5.其他

貌似不在配置程序中开启 VNC 服务，而是直接在终端输入 `vncserver` 或者 `vncserver -geometry 2560x1440` 也可开启（临时）远程桌面。

若在这种情况下运行 VNC Viewer，**必须**输入带端口的 IP。直接输入 IP 会报错：

>  The connection was refused by the computer
